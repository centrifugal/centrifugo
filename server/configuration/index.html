
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Centrifugo is a scalable real-time messaging server in language-agnostic way">
      
      
      
        <meta name="author" content="Centrifugal organization">
      
      
        <link rel="canonical" href="https://centrifugal.dev/docs/server/configuration">
      
      <link rel="shortcut icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-6.2.8">
    
    
      
        <title>Configuration - Centrifugo</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../theme/styles/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="cyan">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://centrifugal.github.io/centrifugo/" title="Centrifugo" class="md-header-nav__button md-logo" aria-label="Centrifugo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Centrifugo
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Configuration
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/centrifugal/centrifugo/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    centrifugal/centrifugo
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../getting_started/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../install/" class="md-tabs__link md-tabs__link--active">
        Server
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../libraries/client/" class="md-tabs__link">
        Libraries
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../faq/" class="md-tabs__link">
        FAQ
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../blog/" class="md-tabs__link">
        Blog
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../pro/" class="md-tabs__link">
        Centrifugo PRO
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://centrifugal.github.io/centrifugo/" title="Centrifugo" class="md-nav__button md-logo" aria-label="Centrifugo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    Centrifugo
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/centrifugal/centrifugo/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    centrifugal/centrifugo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
      
      <label class="md-nav__link" for="nav-2">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        What is Centrifugo
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/" class="md-nav__link">
        Quick start
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/" class="md-nav__link">
        Integration Guide
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
      
      <label class="md-nav__link" for="nav-3">
        Server
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Server" data-md-level="1">
        <label class="md-nav__title" for="nav-3">
          <span class="md-nav__icon md-icon"></span>
          Server
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Configuration
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuration-ways" class="md-nav__link">
    Configuration ways
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-file-formats" class="md-nav__link">
    Config file formats
  </a>
  
    <nav class="md-nav" aria-label="Config file formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-config-format" class="md-nav__link">
    JSON config format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toml-config-format" class="md-nav__link">
    TOML config format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaml-config-format" class="md-nav__link">
    YAML config format
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#important-options" class="md-nav__link">
    Important options
  </a>
  
    <nav class="md-nav" aria-label="Important options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#address" class="md-nav__link">
    address
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port" class="md-nav__link">
    port
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#engine" class="md-nav__link">
    engine
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allowed_origins" class="md-nav__link">
    allowed_origins
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-options" class="md-nav__link">
    Advanced options
  </a>
  
    <nav class="md-nav" aria-label="Advanced options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client_channel_limit" class="md-nav__link">
    client_channel_limit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channel_max_length" class="md-nav__link">
    channel_max_length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_user_connection_limit" class="md-nav__link">
    client_user_connection_limit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_request_max_size" class="md-nav__link">
    client_request_max_size
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_queue_max_size" class="md-nav__link">
    client_queue_max_size
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_anonymous" class="md-nav__link">
    client_anonymous
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_concurrency" class="md-nav__link">
    client_concurrency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sockjs_heartbeat_delay" class="md-nav__link">
    sockjs_heartbeat_delay
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#websocket_message_size_limit" class="md-nav__link">
    websocket_message_size_limit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#websocket_compression" class="md-nav__link">
    websocket_compression
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gomaxprocs" class="md-nav__link">
    gomaxprocs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-endpoint-configuration" class="md-nav__link">
    Advanced endpoint configuration.
  </a>
  
    <nav class="md-nav" aria-label="Advanced endpoint configuration.">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default-endpoints" class="md-nav__link">
    Default endpoints.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-endpoints" class="md-nav__link">
    Admin endpoints.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-endpoints" class="md-nav__link">
    Debug endpoints.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#health-check-endpoint" class="md-nav__link">
    Health check endpoint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-internal-ports" class="md-nav__link">
    Custom internal ports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-default-endpoints" class="md-nav__link">
    Disable default endpoints
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customize-handler-endpoints" class="md-nav__link">
    Customize handler endpoints
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signal-handling" class="md-nav__link">
    Signal handling
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../commands/" class="md-nav__link">
        Console commands
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../client_api/" class="md-nav__link">
        Client API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../http_api/" class="md-nav__link">
        Server HTTP API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../grpc_api/" class="md-nav__link">
        Server GRPC API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../channels/" class="md-nav__link">
        Channels
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../private_channels/" class="md-nav__link">
        Private channels
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../engines/" class="md-nav__link">
        Engines
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../admin/" class="md-nav__link">
        Admin web interface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../proxy/" class="md-nav__link">
        Proxy to backend
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../server_subs/" class="md-nav__link">
        Server-side subscriptions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../connection_expiration/" class="md-nav__link">
        Connection expiration
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-15" type="checkbox" id="nav-3-15" >
      
      <label class="md-nav__link" for="nav-3-15">
        Client-server transports
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Client-server transports" data-md-level="2">
        <label class="md-nav__title" for="nav-3-15">
          <span class="md-nav__icon md-icon"></span>
          Client-server transports
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transports/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transports/websocket/" class="md-nav__link">
        Websocket
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transports/sockjs/" class="md-nav__link">
        SockJS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transports/protobuf/" class="md-nav__link">
        Protobuf protocol
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transports/protocol/" class="md-nav__link">
        Client protocol
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transports/recovery/" class="md-nav__link">
        Message recovery
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-16" type="checkbox" id="nav-3-16" >
      
      <label class="md-nav__link" for="nav-3-16">
        Deploy
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Deploy" data-md-level="2">
        <label class="md-nav__title" for="nav-3-16">
          <span class="md-nav__icon md-icon"></span>
          Deploy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/monitoring/" class="md-nav__link">
        Monitoring
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/tuning/" class="md-nav__link">
        Infrastructure tuning
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/tls/" class="md-nav__link">
        TLS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/nginx/" class="md-nav__link">
        Nginx configuration
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-17" type="checkbox" id="nav-3-17" >
      
      <label class="md-nav__link" for="nav-3-17">
        Misc
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Misc" data-md-level="2">
        <label class="md-nav__title" for="nav-3-17">
          <span class="md-nav__icon md-icon"></span>
          Misc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/insecure_modes/" class="md-nav__link">
        Insecure modes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/migrate/" class="md-nav__link">
        Migrate from Centrifugo v1
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/benchmark/" class="md-nav__link">
        Benchmark
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
      
      <label class="md-nav__link" for="nav-4">
        Libraries
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Libraries" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          Libraries
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../libraries/client/" class="md-nav__link">
        Client libraries
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../libraries/api/" class="md-nav__link">
        API libraries
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
      
      <label class="md-nav__link" for="nav-5">
        FAQ
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="FAQ" data-md-level="1">
        <label class="md-nav__title" for="nav-5">
          <span class="md-nav__icon md-icon"></span>
          FAQ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        Frequently Asked Questions
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
      
      <label class="md-nav__link" for="nav-6">
        Blog
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Blog" data-md-level="1">
        <label class="md-nav__title" for="nav-6">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/" class="md-nav__link">
        About this blog
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/intro_centrifuge/" class="md-nav__link">
        An introduction to Centrifuge – real-time messaging with Go
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/quic_web_transport/" class="md-nav__link">
        Experimenting with QUIC and WebTransport in Go
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/scaling_websocket/" class="md-nav__link">
        Scaling WebSocket in Go and beyond
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
      
      <label class="md-nav__link" for="nav-7">
        Centrifugo PRO
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Centrifugo PRO" data-md-level="1">
        <label class="md-nav__title" for="nav-7">
          <span class="md-nav__icon md-icon"></span>
          Centrifugo PRO
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../pro/" class="md-nav__link">
        About
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuration-ways" class="md-nav__link">
    Configuration ways
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-file-formats" class="md-nav__link">
    Config file formats
  </a>
  
    <nav class="md-nav" aria-label="Config file formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-config-format" class="md-nav__link">
    JSON config format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toml-config-format" class="md-nav__link">
    TOML config format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaml-config-format" class="md-nav__link">
    YAML config format
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#important-options" class="md-nav__link">
    Important options
  </a>
  
    <nav class="md-nav" aria-label="Important options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#address" class="md-nav__link">
    address
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port" class="md-nav__link">
    port
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#engine" class="md-nav__link">
    engine
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allowed_origins" class="md-nav__link">
    allowed_origins
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-options" class="md-nav__link">
    Advanced options
  </a>
  
    <nav class="md-nav" aria-label="Advanced options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client_channel_limit" class="md-nav__link">
    client_channel_limit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channel_max_length" class="md-nav__link">
    channel_max_length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_user_connection_limit" class="md-nav__link">
    client_user_connection_limit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_request_max_size" class="md-nav__link">
    client_request_max_size
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_queue_max_size" class="md-nav__link">
    client_queue_max_size
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_anonymous" class="md-nav__link">
    client_anonymous
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_concurrency" class="md-nav__link">
    client_concurrency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sockjs_heartbeat_delay" class="md-nav__link">
    sockjs_heartbeat_delay
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#websocket_message_size_limit" class="md-nav__link">
    websocket_message_size_limit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#websocket_compression" class="md-nav__link">
    websocket_compression
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gomaxprocs" class="md-nav__link">
    gomaxprocs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-endpoint-configuration" class="md-nav__link">
    Advanced endpoint configuration.
  </a>
  
    <nav class="md-nav" aria-label="Advanced endpoint configuration.">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default-endpoints" class="md-nav__link">
    Default endpoints.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-endpoints" class="md-nav__link">
    Admin endpoints.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-endpoints" class="md-nav__link">
    Debug endpoints.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#health-check-endpoint" class="md-nav__link">
    Health check endpoint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-internal-ports" class="md-nav__link">
    Custom internal ports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-default-endpoints" class="md-nav__link">
    Disable default endpoints
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customize-handler-endpoints" class="md-nav__link">
    Customize handler endpoints
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signal-handling" class="md-nav__link">
    Signal handling
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/centrifugal/centrifugo/edit/master/docs/content/server/configuration.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h1>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>This is a documentation for Centrifugo v2. The latest Centrifugo version is v3. Go to the <a href="https://centrifugal.dev">centrifugal.dev</a> for v3 docs.</p>
</div>
<p>Here we will look at how Centrifugo can be configured.</p>
<h2 id="configuration-ways">Configuration ways<a class="headerlink" href="#configuration-ways" title="Permanent link">&para;</a></h2>
<p>Centrifugo can be configured in several ways:</p>
<ul>
<li>over command-line flags, see <code>centrifugo -h</code> for available flags, command-line flags limited to most frequently used. Command-line options have the highest priority when set than other ways to configure Centrifugo. See description of <a href="https://github.com/spf13/viper">viper</a> library (used in Centrifugo internally) for more details about configuration ways priority.</li>
<li>over configuration file, configuration file supports all options mentioned in this documentation</li>
<li>over OS environment variables, <strong>all Centrifugo options can be set over env in format <code>CENTRIFUGO_&lt;OPTION_NAME&gt;</code></strong> (mostly straightforward except namespaces - <a href="../channels/#setting-namespaces-over-env">see how to set namespaces via env</a>)</li>
</ul>
<p>The basic way to start with Centrifugo is run <code>centrifugo genconfig</code> command which will generate <code>config.json</code> configuration file with some options (in a current directory), so it's then possible to run Centrifugo:</p>
<div class="highlight"><pre><span></span><code>centrifugo -c config.json
</code></pre></div>
<p>Below while describing configuration file format we will look at the meaning of the required options.</p>
<h2 id="config-file-formats">Config file formats<a class="headerlink" href="#config-file-formats" title="Permanent link">&para;</a></h2>
<p>Centrifugo supports different configuration file formats. </p>
<h3 id="json-config-format">JSON config format<a class="headerlink" href="#json-config-format" title="Permanent link">&para;</a></h3>
<p>Centrifugo requires configuration file on start. As was mentioned earlier it must be a file with valid JSON.</p>
<p>This is a minimal Centrifugo configuration file:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;v3_use_offset&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;token_hmac_secret_key&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;YOUR-SECRET-STRING-HERE&gt;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;api_key&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;YOUR-API-KEY-HERE&gt;&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>The only two fields required are <strong>token_hmac_secret_key</strong> and <strong>api_key</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To be fair latest Centrifugo releases introduced a new way of authenticating connections over <a href="../proxy/#connect-proxy">proxy HTTP request</a> from Centrifugo to application backend, and a way to publish messages to channels over <a href="../proxy/#publish-proxy">proxy request to backend</a>. Also there is GRPC server API that can be used instead of HTTP API – so <code>api_key</code> not used there. This means that in some setups both <code>token_hmac_secret_key</code> and <code>api_key</code> are not required at all. But here we describe the traditional way of running Centrifugo - with JWT authentication and publishing messages over server HTTP API.</p>
</div>
<p><code>token_hmac_secret_key</code> used to check JWT signature (more about JWT in <a href="../authentication/">authentication chapter</a>). API key used for Centrifugo API endpoint authorization, see more in <a href="../http_api/">chapter about server HTTP API</a>. Keep both values in secret and never reveal to clients.</p>
<p>The option <code>v3_use_offset</code> turns on using latest client-server protocol <code>offset</code> field (<strong>will be used by default in Centrifugo v3 so better to use it from start</strong>).</p>
<h3 id="toml-config-format">TOML config format<a class="headerlink" href="#toml-config-format" title="Permanent link">&para;</a></h3>
<p>Centrifugo also supports TOML format for configuration file:</p>
<div class="highlight"><pre><span></span><code>centrifugo --config=config.toml
</code></pre></div>
<p>Where <code>config.toml</code> contains:</p>
<div class="highlight"><pre><span></span><code>v3_use_offset = true
token_hmac_secret_key = &quot;&lt;YOUR-SECRET-STRING-HERE&gt;&quot;
api_key = &quot;&lt;YOUR-API-KEY-HERE&gt;&quot;
log_level = &quot;debug&quot;
</code></pre></div>
<p>I.e. the same configuration as JSON file above with one extra option to define logging level.</p>
<h3 id="yaml-config-format">YAML config format<a class="headerlink" href="#yaml-config-format" title="Permanent link">&para;</a></h3>
<p>YAML config also supported. <code>config.yaml</code>:</p>
<div class="highlight"><pre><span></span><code>v3_use_offset: true
token_hmac_secret_key: &quot;&lt;YOUR-SECRET-STRING-HERE&gt;&quot;
api_key: &quot;&lt;YOUR-API-KEY-HERE&gt;&quot;
log_level: debug
</code></pre></div>
<p>With YAML remember to use spaces, not tabs when writing configuration file.</p>
<h2 id="important-options">Important options<a class="headerlink" href="#important-options" title="Permanent link">&para;</a></h2>
<p>Some of the most important options you can configure when running Centrifugo:</p>
<h3 id="address">address<a class="headerlink" href="#address" title="Permanent link">&para;</a></h3>
<p>Bind your Centrifugo to specific interface address (string, by default <code>""</code> - listen on all available interfaces).</p>
<h3 id="port">port<a class="headerlink" href="#port" title="Permanent link">&para;</a></h3>
<p>Port to bind Centrifugo to (string, by default <code>"8000"</code>).</p>
<h3 id="engine">engine<a class="headerlink" href="#engine" title="Permanent link">&para;</a></h3>
<p>Engine to use - <code>memory</code> or <code>redis</code> (string, by default <code>memory</code>). Read more about engines in <a href="../engines/">special chapter</a>.</p>
<h3 id="allowed_origins">allowed_origins<a class="headerlink" href="#allowed_origins" title="Permanent link">&para;</a></h3>
<p>New in Centrifugo v2.8.3.</p>
<p>This option allows setting an array of allowed origin patterns (array of strings) for WebSocket and SockJS endpoints to prevent <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery">CSRF</a> attack. This is especially important when using <a href="../proxy/#connect-proxy">connect proxy</a> feature.</p>
<p>If <code>allowed_origins</code> option not set at all then no origin check will be performed by Centrifugo.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Centrifugo v3 may enforce same-origin strategy by default, so it's better to properly configure <code>allowed_origins</code> as soon as possible.</p>
</div>
<p>As soon as <code>allowed_origins</code> defined every connection request will be checked against each pattern in an array.</p>
<p>For example, when connecting to Centrifugo from an application on <code>http://localhost:3000</code>. In this case <code>allowed_origins</code> should be configured this way:</p>
<div class="highlight"><pre><span></span><code>&quot;allowed_origins&quot;: [
    &quot;http://localhost:3000&quot;
]
</code></pre></div>
<p>When connecting from <code>https://example.com</code>:</p>
<div class="highlight"><pre><span></span><code>&quot;allowed_origins&quot;: [
    &quot;https://example.com&quot;
]
</code></pre></div>
<p>Origin pattern can contain wildcard symbol <code>*</code> to match subdomains:</p>
<div class="highlight"><pre><span></span><code>&quot;allowed_origins&quot;: [
    &quot;https://*.example.com&quot;
]
</code></pre></div>
<p>– in this case requests with <code>Origin</code> header like <code>https://foo.example.com</code> or <code>https://bar.example.com</code> will pass the check.</p>
<p>It's also possible to allow all origins in the following way (but this is discouraged especially when using connect proxy feature):</p>
<div class="highlight"><pre><span></span><code>&quot;allowed_origins&quot;: [
    &quot;*&quot;
]
</code></pre></div>
<p>Connection requests without <code>Origin</code> header set are passing through without any checks (i.e. always allowed).</p>
<h2 id="advanced-options">Advanced options<a class="headerlink" href="#advanced-options" title="Permanent link">&para;</a></h2>
<h3 id="client_channel_limit">client_channel_limit<a class="headerlink" href="#client_channel_limit" title="Permanent link">&para;</a></h3>
<p>Default: 128</p>
<p>Sets maximum number of different channel subscriptions single client can have.</p>
<h3 id="channel_max_length">channel_max_length<a class="headerlink" href="#channel_max_length" title="Permanent link">&para;</a></h3>
<p>Default: 255</p>
<p>Sets maximum length of channel name.</p>
<h3 id="client_user_connection_limit">client_user_connection_limit<a class="headerlink" href="#client_user_connection_limit" title="Permanent link">&para;</a></h3>
<p>Default: 0</p>
<p>Maximum number of connections from user (with known user ID) to Centrifugo node. By default, unlimited.</p>
<p>The important thing to emphasize is that <code>client_user_connection_limit</code> works only per one Centrifugo node and exists mostly to protect Centrifugo from many connections from a single user – but not for business logic limitations. This means that if you will scale nodes – say run 10 Centrifugo nodes – then a user will be able to create 10 connections (one to each node).</p>
<h3 id="client_request_max_size">client_request_max_size<a class="headerlink" href="#client_request_max_size" title="Permanent link">&para;</a></h3>
<p>Default: 65536</p>
<p>Maximum allowed size of request from client in bytes.</p>
<h3 id="client_queue_max_size">client_queue_max_size<a class="headerlink" href="#client_queue_max_size" title="Permanent link">&para;</a></h3>
<p>Default: 10485760</p>
<p>Maximum client message queue size in bytes to close slow reader connections. By default - 10mb.</p>
<h3 id="client_anonymous">client_anonymous<a class="headerlink" href="#client_anonymous" title="Permanent link">&para;</a></h3>
<p>Default: false</p>
<p>Enable a mode when all clients can connect to Centrifugo without JWT connection token. In this case all connections without token will be treated as anonymous (i.e. with empty user ID) and only can subscribe to channels with <code>anonymous</code> option enabled.</p>
<h3 id="client_concurrency">client_concurrency<a class="headerlink" href="#client_concurrency" title="Permanent link">&para;</a></h3>
<p>Available since Centrifugo v2.8.0</p>
<p>Default: 0</p>
<p><code>client_concurrency</code> when set tells Centrifugo that commands from client must be processed concurrently.</p>
<p>By default, concurrency disabled – Centrifugo processes commands received from a client one by one. This means that if a client issues two RPC requests to a server then Centrifugo will process the first one, then the second one. If the first RPC call is slow then the client will wait for the second RPC response much longer than it could (even if second RPC is very fast). If you set <code>client_concurrency</code> to some value greater than 1 then commands will be processed concurrently (in parallel) in separate goroutines (with maximum concurrency level capped by <code>client_concurrency</code> value). Thus, this option can effectively reduce the latency of individual requests. Since separate goroutines involved in processing this mode adds some performance and memory overhead – though it should be pretty negligible in most cases. This option applies to all commands from a client (including subscribe, publish, presence, etc).</p>
<h3 id="sockjs_heartbeat_delay">sockjs_heartbeat_delay<a class="headerlink" href="#sockjs_heartbeat_delay" title="Permanent link">&para;</a></h3>
<p>Default: 25</p>
<p>Interval in seconds how often to send SockJS h-frames to client.</p>
<h3 id="websocket_message_size_limit">websocket_message_size_limit<a class="headerlink" href="#websocket_message_size_limit" title="Permanent link">&para;</a></h3>
<p>Default: 65536 (64KB)</p>
<p>Maximum allowed size of message from websocket in bytes.</p>
<h3 id="websocket_compression">websocket_compression<a class="headerlink" href="#websocket_compression" title="Permanent link">&para;</a></h3>
<p>Default: false</p>
<p>Enable websocket compression, see chapter about websocket transport for more details.</p>
<h3 id="gomaxprocs">gomaxprocs<a class="headerlink" href="#gomaxprocs" title="Permanent link">&para;</a></h3>
<p>Default: 0</p>
<p>By default, Centrifugo runs on all available CPU cores. To limit amount of cores Centrifugo can utilize in one moment use this option.</p>
<h2 id="advanced-endpoint-configuration">Advanced endpoint configuration.<a class="headerlink" href="#advanced-endpoint-configuration" title="Permanent link">&para;</a></h2>
<p>After Centrifugo started there are several endpoints available.</p>
<h3 id="default-endpoints">Default endpoints.<a class="headerlink" href="#default-endpoints" title="Permanent link">&para;</a></h3>
<p>The main endpoint is raw Websocket endpoint to serve client connections that use pure Websocket protocol:</p>
<div class="highlight"><pre><span></span><code>ws://localhost:8000/connection/websocket
</code></pre></div>
<p>Then there is SockJS endpoint - it's needed to serve client connections that use SockJS library:</p>
<div class="highlight"><pre><span></span><code>http://localhost:8000/connection/sockjs
</code></pre></div>
<p>Finally, API endpoint to <code>publish</code> messages to channels (and execute other available API commands):</p>
<div class="highlight"><pre><span></span><code>http://localhost:8000/api
</code></pre></div>
<p>By default, all endpoints work on port <code>8000</code>. This can be changed with <code>port</code> option:</p>
<div class="highlight"><pre><span></span><code>{
    &quot;port&quot;: 9000
}
</code></pre></div>
<p>In production setup you may have a proper domain name in endpoint addresses above instead of <code>localhost</code>. While domain name and port parts can differ depending on setup – URL paths stay the same: <code>/connection/sockjs</code>, <code>/connection/websocket</code>, <code>/api</code>.</p>
<p>Let's look at possibilities to tweak available endpoints.</p>
<h3 id="admin-endpoints">Admin endpoints.<a class="headerlink" href="#admin-endpoints" title="Permanent link">&para;</a></h3>
<p>First is enabling admin endpoints:</p>
<div class="highlight"><pre><span></span><code>{
    ...
    &quot;admin&quot;: true,
    &quot;admin_password&quot;: &quot;password&quot;,
    &quot;admin_secret&quot;: &quot;secret&quot;
}
</code></pre></div>
<p>This makes the following endpoint available: <a href="http://localhost:8000">http://localhost:8000</a></p>
<p>At this address you will see admin web interface. You can log into it using <code>admin_password</code> value shown above.</p>
<h3 id="debug-endpoints">Debug endpoints.<a class="headerlink" href="#debug-endpoints" title="Permanent link">&para;</a></h3>
<p>Next, when Centrifugo started in debug mode some extra debug endpoints become available. To start in debug mode add <code>debug</code> option to config:</p>
<div class="highlight"><pre><span></span><code>{
    ...
    &quot;debug&quot;: true
}
</code></pre></div>
<p>And endpoint:</p>
<div class="highlight"><pre><span></span><code>http://localhost:8000/debug/pprof/
</code></pre></div>
<p>– will show useful information about internal state of Centrifugo instance. This info is especially helpful when troubleshooting. See <a href="https://github.com/centrifugal/centrifugo/wiki/Investigating-performance-issues">wiki page</a> for more info.</p>
<h3 id="health-check-endpoint">Health check endpoint<a class="headerlink" href="#health-check-endpoint" title="Permanent link">&para;</a></h3>
<p>New in v2.1.0</p>
<p>Use <code>health</code> boolean option (by default <code>false</code>) to enable healthcheck endpoint which will be available on path <code>/health</code>. Also available over command-line flag:</p>
<div class="highlight"><pre><span></span><code>./centrifugo -c config.json --health
</code></pre></div>
<h3 id="custom-internal-ports">Custom internal ports<a class="headerlink" href="#custom-internal-ports" title="Permanent link">&para;</a></h3>
<p>We strongly recommend to not expose API, admin, debug and prometheus endpoints to Internet. The following Centrifugo endpoints are considered internal:</p>
<ul>
<li>API endpoint (<code>/api</code>) - for HTTP API requests</li>
<li>Admin web interface endpoints (<code>/</code>, <code>/admin/auth</code>, <code>/admin/api</code>) - used by web interface</li>
<li>Prometheus endpoint (<code>/metrics</code>) - used for exposing server metrics in Prometheus format </li>
<li>Health check endpoint (<code>/health</code>) - used to do health checks</li>
<li>Debug endpoints (<code>/debug/pprof</code>) - used to inspect internal server state</li>
</ul>
<p>It's a good practice to protect those endpoints with firewall. For example, it's possible to configure in <code>location</code> section of Nginx configuration.</p>
<p>Though sometimes you don't have access to per-location configuration in your proxy/load balancer software. For example when using Amazon ELB. In this case you can change ports on which your internal endpoints work.</p>
<p>To run internal endpoints on custom port use <code>internal_port</code> option:</p>
<div class="highlight"><pre><span></span><code>{
    ...
    &quot;internal_port&quot;: 9000
}
</code></pre></div>
<p>So admin web interface will work on address:</p>
<div class="highlight"><pre><span></span><code>http://localhost:9000
</code></pre></div>
<p>Also debug page will be available on new custom port too:</p>
<div class="highlight"><pre><span></span><code>http://localhost:9000/debug/pprof/
</code></pre></div>
<p>The same for API and prometheus endpoint.</p>
<h3 id="disable-default-endpoints">Disable default endpoints<a class="headerlink" href="#disable-default-endpoints" title="Permanent link">&para;</a></h3>
<p>These options available since v2.4.0</p>
<p>To disable websocket endpoint set <code>websocket_disable</code> boolean option to <code>true</code>.</p>
<p>To disable SockJS endpoint set <code>sockjs_disable</code> boolean option to <code>true</code>.</p>
<p>To disable API endpoint set <code>api_disable</code> boolean option to <code>true</code>.</p>
<h3 id="customize-handler-endpoints">Customize handler endpoints<a class="headerlink" href="#customize-handler-endpoints" title="Permanent link">&para;</a></h3>
<p>Starting from Centrifugo v2.2.5 it's possible to customize server HTTP handler endpoints. To do this Centrifugo supports several options:</p>
<ul>
<li><code>admin_handler_prefix</code> (default <code>""</code>) - to control Admin panel URL prefix</li>
<li><code>websocket_handler_prefix</code> (default <code>"/connection/websocket"</code>) - to control WebSocket URL prefix</li>
<li><code>sockjs_handler_prefix</code> (default <code>"/connection/sockjs"</code>) - to control SockJS URL prefix</li>
<li><code>api_handler_prefix</code> (default <code>"/api"</code>) - to control HTTP API URL prefix</li>
<li><code>prometheus_handler_prefix</code> (default <code>"/metrics"</code>) - to control Prometheus URL prefix</li>
<li><code>health_handler_prefix</code> (default <code>"/health"</code>) - to control health check URL prefix</li>
</ul>
<h2 id="signal-handling">Signal handling<a class="headerlink" href="#signal-handling" title="Permanent link">&para;</a></h2>
<p>It's possible to send HUP signal to Centrifugo to reload a configuration:</p>
<div class="highlight"><pre><span></span><code>kill -HUP &lt;PID&gt;
</code></pre></div>
<p>Though at moment <strong>this will only reload token secrets and channel options (top-level and namespaces)</strong>.</p>
<p>Centrifugo tries to gracefully shutdown client connections when SIGINT or SIGTERM signals received. By default, maximum graceful shutdown period is 30 seconds but can be changed using <code>shutdown_timeout</code> (integer, in seconds) configuration option.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
    
    <div class="md-footer-nav">
        <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
            
            <a href="../install/" title="Installation" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
                <div class="md-footer-nav__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
                </div>
                <div class="md-footer-nav__title">
                    <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                        Installation
                    </div>
                </div>
            </a>
            
            
            <a href="../commands/" title="Console commands" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
                <div class="md-footer-nav__title">
                    <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                        Console commands
                    </div>
                </div>
                <div class="md-footer-nav__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
                </div>
            </a>
            
        </nav>
    </div>
    
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">
            <div class="md-footer-copyright">
                
                <div class="md-footer-copyright__highlight">
                    Copyright &copy; 2020 Centrifugal
                </div>
                
                <style>

                    /* Preserve link color */
                    .md-announce a,
                    .md-announce a:focus,
                    .md-announce a:hover {
                        color: currentColor;
                    }

                    /* Don't wrap name of blog article */
                    .md-announce strong {
                        white-space: nowrap;
                    }

                    /* Twitter icon */
                    .md-announce .twitter {
                        margin-left: .2em;
                        color: #00acee;
                    }
                </style>
                <a href="https://opencollective.com/centrifugal">
                    Support Centrifugo development on <strong>Open Collective</strong>
                </a>
            </div>
            
        </div>
    </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>
